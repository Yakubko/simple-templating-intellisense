window.Autocomplete=(()=>{"use strict";var e={628:(e,t,n)=>{function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,{default:()=>m});var a=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ulElement=void 0,this.mainElement=void 0,this.measurementsHelpers=void 0,this.measurementsHelpers={textArea:document.createElement("textarea"),fontCanvasCtx:document.createElement("canvas").getContext("2d")},function(e){for(var n in e)t.measurementsHelpers.textArea.style[n]=e[n]}({border:"none",height:"0",overflow:"hidden",padding:"0",position:"absolute",left:"0",top:"0",zIndex:"-1"}),this.mainElement=document.createElement("div"),this.mainElement.className="a-body",this.ulElement=document.createElement("ul"),this.ulElement.className="ui-autocomplete",this.mainElement.appendChild(this.ulElement),this.mainElement.appendChild(this.measurementsHelpers.textArea),document.addEventListener("DOMContentLoaded",(function(){window.document.body.appendChild(t.mainElement)}))}var t,n;return t=e,(n=[{key:"getElement",value:function(){return this.mainElement}},{key:"bindData",value:function(e){this.ulElement.innerHTML=e.map((function(e,t){return"<li"+(0===t?' class="ui-state-focus"':"")+">"+e+"</li>"})).join("")}},{key:"select",value:function(e){this.ulElement.getElementsByClassName("ui-state-focus")[0].classList.remove("ui-state-focus"),this.ulElement.children[e].classList.add("ui-state-focus"),this.ulElement.children[e].scrollIntoView({behavior:"smooth",block:"nearest"})}},{key:"show",value:function(){this.mainElement.style.display="block"}},{key:"hide",value:function(){this.ulElement.innerHTML="",this.mainElement.style.display="none"}},{key:"alignTo",value:function(e){var t=e.getBoundingClientRect(),n=t.left,i=t.top,a=this.getCaretPosition(e),s=a.left,r=a.top;this.mainElement.style.left=s+n+"px",this.mainElement.style.top=i+r+"px"}},{key:"getCaretPosition",value:function(e){var t=window.getComputedStyle(e),n=e.value,i=e.selectionStart,a=this.measurementsHelpers,s=a.fontCanvasCtx,r=a.textArea,l=n.substr(0,i),o=t.fontSize,u=t.fontFamily,c=t.paddingLeft,h=t.paddingTop,d=parseInt(o),f=d;switch(e.nodeName){case"TEXTAREA":var v=t.paddingRight,m=t.lineHeight,p=t.font,y=t.letterSpacing,g=t.whiteSpace,b=t.wordBreak,E=t.wordSpacing,k=t.wordWrap;d=parseInt(m)||d,function(e){for(var t in e)r.style[t]=e[t]}({width:e.clientWidth-parseInt(c)-parseInt(v)+"px",font:p,fontSize:o,fontFamily:u,letterSpacing:y,whiteSpace:g,wordBreak:b,wordSpacing:E,wordWrap:k}),r.value=l,f=(Math.floor((r.scrollHeight-e.scrollTop)/d)||1)*d+Math.floor(e.scrollTop%d)+5,l=l.substr(l.lastIndexOf("\n")+1),r.value=l;for(var w=-1,O=r.scrollHeight;O===r.scrollHeight&&Math.floor(r.scrollHeight/d)>1&&!(w>200);)w=r.value.lastIndexOf(" "),r.value=r.value.substr(0,r.value.lastIndexOf(" "));l=l.substr(w+1);break;case"INPUT":f+=10}var x="".concat(o," ").concat(u||"sans-serif");return s.font!==x&&(s.font=x),{left:Math.round(s.measureText(l).width)-e.scrollLeft+parseInt(c),top:f+parseInt(h)}}}])&&i(t.prototype,n),e}();function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const u=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listDOM=void 0,this.registersData={},this.activeRegister={element:null,name:"",scrollableElements:[]},this.state={visible:!1,data:[],partialFilter:"",selectedIndex:0},this.listDOM=new a}var t,n;return t=e,(n=[{key:"data",value:function(e,t){return t&&(this.registersData[e]=t),this.registersData[e]}},{key:"getState",value:function(){return this.state}},{key:"attach",value:function(e,t){var n=this;if(this.activeRegister.element){if(t.isSameNode(this.activeRegister.element))return;this.detach()}var i=this.getParentsConf(t),a=i.scrollable,s=i.zIndex;this.activeRegister.name=e,this.activeRegister.element=t,this.activeRegister.scrollableElements=a,this.listDOM.getElement().style.zIndex=s?(s+1).toString():"auto",this.activeRegister.scrollableElements.forEach((function(e){e.addEventListener("scroll",n,!1)})),this.align()}},{key:"detach",value:function(){var e=this;this.activeRegister.scrollableElements.forEach((function(t){t.removeEventListener("scroll",e,!1)})),this.activeRegister.name="",this.activeRegister.element=null,this.activeRegister.scrollableElements=[]}},{key:"handleEvent",value:function(e){"scroll"===e.type&&this.hide()}},{key:"align",value:function(){this.state.visible&&this.listDOM.alignTo(this.activeRegister.element)}},{key:"show",value:function(){this.state.visible||(this.state=r(r({},this.state),{},{visible:!0}),this.listDOM.show())}},{key:"hide",value:function(){this.state=r(r({},this.state),{},{visible:!1}),this.listDOM.hide()}},{key:"bindData",value:function(e){this.state=r(r({},this.state),{},{selectedIndex:0}),this.listDOM.bindData(e)}},{key:"filter",value:function(e){var t=this.getFilteredData(e),n=t.partialFilter,i=t.data;this.state=r(r({},this.state),{},{partialFilter:n,data:i}),i.length>0?(this.show(),this.bindData(i)):this.hide()}},{key:"selectByDirection",value:function(e){this.state.data.length>1&&(this.state.selectedIndex=this.mod(this.state.selectedIndex+("down"===e?1:-1),this.state.data.length),this.listDOM.select(this.state.selectedIndex))}},{key:"getFilteredData",value:function(e){var t=this.registersData[this.activeRegister.name],n=e.split("."),i=function e(t,n){if(t.length>1){var i=t.shift();return n[i]?e(t,n[i]):null}return 1===t.length?n:null}(n,t),a=i?Object.keys(i):[];return a.sort(),a&&n[0]&&1===(a=a.filter((function(e){return e.startsWith(n[0])}))).length&&n[0]===a[0]&&(a=[]),{partialFilter:n[0],data:a}}},{key:"getParentsConf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scrollable:[],zIndex:0};return null==e?t:e===document.body?(t.scrollable.push(window),t):((e.scrollHeight>e.clientHeight||"TEXTAREA"===e.tagName)&&t.scrollable.push(e),t.zIndex=Math.max(t.zIndex,parseInt(window.getComputedStyle(e).getPropertyValue("z-index"))||0),this.getParentsConf(e.parentNode,t))}},{key:"mod",value:function(e,t){return(e%t+t)%t}}])&&o(t.prototype,n),e}());function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var h=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=void 0,this.registerName=void 0,this.state={ignoreOneTimeKeyUpEvent:!1},this.element=t,this.registerName=n,this.element.addEventListener("blur",this,!1),this.element.addEventListener("focus",this,!1),this.element.addEventListener("click",this,!1),this.element.addEventListener("keyup",this,!1),this.element.addEventListener("keydown",this,!1)}var t,n;return t=e,(n=[{key:"unbind",value:function(){this.element.removeEventListener("blur",this,!1),this.element.removeEventListener("focus",this,!1),this.element.removeEventListener("click",this,!1),this.element.removeEventListener("keyup",this,!1),this.element.removeEventListener("keydown",this,!1)}},{key:"getElement",value:function(){return this.element}},{key:"handleEvent",value:function(e){switch(e.type){case"focus":u.attach(this.registerName,this.element);break;case"blur":u.detach();case"click":u.hide();break;case"keyup":this.keyup(e);break;case"keydown":this.keydown(e)}}},{key:"keyup",value:function(e){if(this.state.ignoreOneTimeKeyUpEvent)this.state.ignoreOneTimeKeyUpEvent=!1;else{var t=this.element,n=t.value,i=t.selectionStart;"keyup"===e.type&&"{"===e.key&&"{{"===n.substr(i-2,2)&&(this.state.ignoreOneTimeKeyUpEvent=!0,this.addValueString("}}"));var a=this.getBracketActiveWord();if(null!==a){u.filter(a);var s=u.getState(),r=s.visible,l=s.partialFilter,o=s.data;if(r&&("Backspace"===e.key||1===e.key.length&&" "!==e.key)){if("Backspace"!==e.key){var c=o[0].substr(l.length);c&&this.addValueString(c,!0)}u.align()}}else u.hide()}}},{key:"keydown",value:function(e){if(u.getState().visible&&["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Enter"].includes(e.key)&&(this.state.ignoreOneTimeKeyUpEvent=!0,["ArrowUp","ArrowDown","Enter"].includes(e.key)&&e.preventDefault(),["ArrowRight","ArrowLeft","Enter"].includes(e.key)&&(u.hide(),"Enter"===e.key&&this.element.selectionStart!==this.element.selectionEnd&&(this.element.selectionStart=this.element.selectionEnd)),["ArrowUp","ArrowDown"].includes(e.key))){u.selectByDirection("ArrowUp"===e.key?"up":"down");var t=u.getState(),n=t.partialFilter,i=t.data[t.selectedIndex].substr(n.length);this.addValueString(i,!0)}}},{key:"addValueString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.element,i=n.value,a=n.selectionStart,s=n.selectionEnd;this.element.value=[i.slice(0,a),e,i.slice(s)].join(""),this.element.selectionStart=this.element.selectionEnd=a,t&&(this.element.selectionEnd+=e.length)}},{key:"getBracketActiveWord",value:function(){var e=this.element,t=e.value,n=e.selectionStart,i=null,a=[t.lastIndexOf("{{",n-2),t.indexOf("}}",n)],s=a[0],r=a[1];if(s>=0&&r>0){var l=[t.lastIndexOf("}}",n-2),t.indexOf("{{",n)],o=l[1];if(l[0]<s&&(-1===o||r<o)){var u=[t.lastIndexOf(" ",n-1),t.indexOf(" ",n)],c=u[0],h=u[1];s=c>s?c+1:s+2,r=h<r&&-1!==h?h:r,i=t.substr(s,r-s)}}return i}}])&&c(t.prototype,n),e}();function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=void 0,this.elements=[],this.name=t}var t,n;return t=e,(n=[{key:"data",value:function(e){return u.data(this.name,e)}},{key:"add",value:function(e){this.elements.some((function(t){return t.getElement().isSameNode(e)}))||this.elements.push(new h(e,this.name))}},{key:"remove",value:function(e){this.elements=this.elements.filter((function(t){return!t.getElement().isSameNode(e)||(t.unbind(),!1)}))}}])&&d(t.prototype,n),e}();function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"getRegister",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",n=e.groups[t];return void 0===n&&(n=new f(t),e.groups[t]=n),n}}],null&&v(t.prototype,null),n&&v(t,n),e}();m.groups={}}},t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}return n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(628)})().default;
//# sourceMappingURL=autocomplete.min.js.map